{
	"include": [
		"lomo:pipeline/copy_with_depth.json"
	],

	"framebuffers": [
		{
			"name": "reflection",
			"depthAttachment": {"image": "reflection_depth"},
			"colorAttachments": [{"image": "reflection_main"}]
		}
	],

	"programs": [
		{
			"name": "reflection",
			"vertexSource": "canvas:shaders/pipeline/post/simple_full_frame.vert",
			"fragmentSource": "lomo:shaders/pipeline/reflection.frag",
			"samplers": [
				"u_reflective",
				"u_input",
				"u_input_depth"
			]
		}
	],

	"images": [
		{
			"name": "reflective",
			"texParams": [
				{ "name": "TEXTURE_MIN_FILTER", "val": "LINEAR" },
				{ "name": "TEXTURE_MAG_FILTER", "val": "LINEAR" },
				{ "name": "TEXTURE_WRAP_S", "val": "CLAMP" },
				{ "name": "TEXTURE_WRAP_T", "val": "CLAMP" }
			]
		},
		{
			"name": "reflection_main",
			"texParams": [
				{ "name": "TEXTURE_MIN_FILTER",	"val": "LINEAR" },
				{ "name": "TEXTURE_MAG_FILTER", "val": "LINEAR" },
				{ "name": "TEXTURE_WRAP_S", "val": "CLAMP" },
				{ "name": "TEXTURE_WRAP_T", "val": "CLAMP" }
			]
		},
		{
			"name": "reflection_depth",
			"internalFormat": "DEPTH_COMPONENT",
			"pixelFormat": "DEPTH_COMPONENT",
			"pixelDataType": "FLOAT",
			"texParams": [
				{ "name": "TEXTURE_MIN_FILTER",	"val": "NEAREST" },
				{ "name": "TEXTURE_MAG_FILTER",	"val": "NEAREST" },
				{ "name": "TEXTURE_WRAP_S",	"val": "CLAMP" },
				{ "name": "TEXTURE_WRAP_T",	"val": "CLAMP" },
				{ "name": "TEXTURE_COMPARE_MODE", "val": "NONE" }
			]
		}
	]
}